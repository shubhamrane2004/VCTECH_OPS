// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  username  String   @unique
  email     String   @unique
  phoneNo   String   @unique
  passwordHash  String
  isApproved Boolean @default(false)
  userAuthToken String @unique
  image         String @default("data:image/png;base64,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")
  otp String?
  otpExpires DateTime?
  isVerified Boolean @default(false)
  lastLogin  DateTime? 
  lastLogout    DateTime?
  lastActivity DateTime?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  resetToken        String?
  resetTokenExpiry  DateTime?

  role   Roles @relation(fields: [roleId], references: [id])
  roleId Int
}

model Roles{
  id        Int @id @map("_id")
  name      String @unique
  User      User[]
}

model Stage0 {  
  SONumber     String     @id @map("_id")
  SOId         String?
  isDropped    Boolean    @default(false)
  currentStage Int
  clientName   String       
  SubTotal     Float
  Total        Float
  SOCategory   String     
  PMName       String
  clientExpectedDate    DateTime?
  orderStatus  String 
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  Stage1       Stage1[]
  LineItems    LineItems[]
  Installation Installation[]
  Service      Service[]
  Stage4       Stage4[]
  Stage5       Stage5[]
  activityLogs   ActivityLog[]
  stageHistory StageHistory[]
  chatMessages ChatMessage[]
}

model Stage1 {
  DCid            String    @id @default(auto()) @map("_id") @db.ObjectId
  SONumber        String   
  dcDetails       DcDetails[]
  DCNumber        String 
  status          String
  PODNo           String
  DispatchDate    DateTime
  EstdDeliveryDate    DateTime
  dcAmount        Float
  attachment      String?
  isSaved           Boolean
  fileName          String
  filePreviewUrl    String?
  billType          BillType    
  isTypeSet         Boolean
  submittedOn     DateTime   @default(now())
  SONo            Stage0  @relation(fields: [SONumber],references: [SONumber])
}

model DcDetails {
  DCid             String @id @map("_id") @db.ObjectId
  dcNumber         String
  customerName     String
  dcDate           DateTime
  total            Float
  status           String
  stage1           Stage1 @relation(fields: [DCid], references: [DCid])
}

enum BillType {
  DC
  E_way
}

model LineItems{
  Itemid          String      @id @map("_id")
  SONumber        String 
  name            String
  quantity        Int
  unit            String
  rate            Float
  amount          Float
  status          String
  isAvailabilityFrozen  Boolean
  needToPurchaseLocally   Boolean
  isAvailable  Boolean
  serialNo     String?
  invoiceNo    String?
  invoiceattachment   String?
  invoicefilename String?
  SONo            Stage0     @relation(fields: [SONumber], references: [SONumber])
}

model Installation {
  SONumber          String      @id @map("_id") 
  engName           String
  ScheduleDate      DateTime
  MobNo             String
  VendorName        String
  InstallationRem   Json
  InstReport        String?
  InstReportName    String?
  InstPreviewUrl    String?
  activeTab         String
  submittedOn       DateTime   @default(now())
  SONo              Stage0     @relation(fields: [SONumber], references: [SONumber])
}

model Service {
  SONumber          String     @id @map("_id") 
  engName           String
  ScheduleDate      DateTime
  MobNo             String
  VendorName        String
  ServiceRem        Json
  ServiceReport     String?  
  ServiceReportName    String?
  ServicePreviewUrl    String?
  activeTab         String
  Serticketid       String
  submittedOn       DateTime   @default(now())
  SONo              Stage0     @relation(fields: [SONumber], references: [SONumber])
}

model Stage4{
  SONumber        String     @id @map("_id")
  returnPickupRequested  Boolean
  ReturnPickupName     String
  ReturnPickupMobile   String
  ReturnPickupRemark   String
  DCNumber        String?
  CourierTrackNo  String?
  DCAmount        Float?
  DispatchDate    DateTime?  
  DeliveryDate    DateTime?  
  Remark          String?
  Attachment      String?
  fileName        String?
  SONo            Stage0     @relation(fields: [SONumber], references: [SONumber])
}

model Stage5{
  SONumber      String     @id @map("_id")
  accStatus     String   
  rejected1     Boolean   
  accRemark    String
  isDataSaved1 Boolean
  isEditing1 Boolean
  retaccStatus     String?     
  rejected2     Boolean?
  retaccRemark  String?
  isDataSaved2 Boolean?
  isEditing2 Boolean?
  SONo            Stage0     @relation(fields: [SONumber], references: [SONumber])
}

model ActivityLog {
  id             String   @id @default(auto()) @map("_id") @db.ObjectId
  salesOrderId   String
  username       String
  role           String
  action         String
  details        String? 
  category       String   
  timestamp      DateTime @default(now())
  salesOrder     Stage0   @relation(fields: [salesOrderId], references: [SONumber])

  @@index([salesOrderId])
}

model StageHistory {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  SONumber  String
  stage     Int 
  timestamp DateTime @default(now())
  SO        Stage0   @relation(fields: [SONumber], references: [SONumber])

  @@index([SONumber])
}

model ChatMessage {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  SOId      String   // Zoho Sales Order ID
  SONumber  String   // Internal Sales Order Number
  seenBy    String[] @default([]) // Array of usernames who have seen the message
  seenTimestamps Json?            
  username  String
  message   String
  createdAt DateTime @default(now())
  SO        Stage0   @relation(fields: [SONumber], references: [SONumber])

  @@index([SOId])
  @@index([SONumber])
}
